import{H as he,T as ge}from"./components.1da40097.js";import{_ as fe}from"./IconCustom.vue.ecb74b05.js";import{_ as ye}from"./nuxt-link.127be1bd.js";import{f as me,g as ve,G as _e,H as G,r as b,l as ie,k as K,o as u,c as d,b as i,w as M,a,t as f,h as e,u as xe,_ as be,d as we,n as p,F as N,x as L,T as ke,q as C,v as $,i as A,K as Ce,p as $e,e as Se}from"./entry.1a9e1a05.js";import{u as qe}from"./index.8d0ad3c6.js";import{u as Q,q as ce}from"./query.040c963c.js";import{u as Ae}from"./state.15aeb9aa.js";import{f as Te}from"./navigation.13aad7cf.js";import{i as Pe,j as Me,c as Ne}from"./states.f122d053.js";import{p as ue}from"./package.9e798f71.js";import{_ as Le}from"./_plugin-vue_export-helper.c27b6911.js";import"./iconify.0d4b5a2c.js";import"./preview.0419d23a.js";const Ie=I=>($e("data-v-c1aec1e1"),I=I(),Se(),I),je={id:"list_page"},Fe={style:{display:"none"}},He={class:"shrink-0 px-4 sm:px-8 py-4 space-y-4 sm:sticky top-0 inset-x-0 z-10 bg-gray-50"},De={class:"flex items-start sm:space-x-2"},ze={class:"grow max-w-full space-y-2"},Ue={class:"p-2 flex items-start text-sm bg-gray-100 sm:space-x-4"},Ve={class:"shrink-0"},Be=["onClick"],Ee={class:"space-y-2"},Oe={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},Re=["disabled","onClick"],We={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},Ge=["disabled","onClick"],Ke={class:"flex items-center space-x-2"},Qe=Ie(()=>a("hr",null,null,-1)),Je={class:"shrink-0 mx-4 sm:mx-8 hidden sm:flex justify-between items-center text-sm"},Xe={class:"hidden sm:block"},Ye={class:"hidden sm:block"},Ze={key:0,class:"grow flex flex-col justify-center items-center space-y-2 text-gray-400"},et={class:"text-xl"},tt={key:1,class:"grow container p-4 sm:p-8 mx-auto space-y-4"},st={class:"flex items-start"},rt={class:"grow font-bold text-base sm:text-lg"},lt={key:0,class:"px-10 flex flex-wrap gap-2 text-xs"},at=["onClick"],nt=["onClick"],ot=me({__name:"list",async setup(I){let v,T;const l=ve(),o=_e(),{data:J}=([v,T]=G(()=>Q("rootFolder",()=>Te())),v=await v,T(),v);let w;const X=[];Array.isArray(J.value)&&(w=J.value.find(t=>t._path===l.article.link),w!=null&&w.children&&w.children.length>0&&w.children.forEach(t=>{"children"in t&&X.push(t)}));const j=(t="")=>{let s="";const h=t.split("/");return h.length===3&&h[1]===l.article.folder&&(s=h[2]),s},_=b(l.filter.all),F=b(!1),H=t=>{_.value===t?_.value=l.filter.all:_.value=t,y.value=[],S.value=l.filter.all,U()},x=b(!1);let V,B;const E=[],O=[],Y={},Z={};if(w&&w.children.length>0){for(const t of w.children)if("children"in t){const s=[],h=[],{data:k}=([v,T]=G(()=>Q(`${t._path}-filter`,()=>ce(`${t._path}`).where({_type:"markdown"}).only(["tags","series"]).find())),v=await v,T(),v);k.value.forEach(c=>{c.tags&&(s.push(...c.tags),E.push(...c.tags)),c.series&&(h.push(c.series),O.push(c.series))});const n=j(t._path);n&&(Y[n]=[...new Set(s)],Z[n]=[...new Set(h)])}else t._type&&t._type==="markdown"&&(t.tags&&E.push(...t.tags),t.series&&O.push(t.series));V=new Set(E),B=new Set(O)}const y=b([]),D=b(!1),ee=t=>{if(t===l.filter.all){y.value=[],U();return}if(y.value.length>0){const s=y.value.findIndex(h=>h===t);s!==-1?y.value.splice(s,1):y.value.push(t)}else y.value.push(t);U()},S=b(l.filter.all),z=b(!1),te=t=>{S.value===t?S.value=l.filter.all:S.value=t,U()},U=()=>{Ce({path:"/list",query:{category:_.value,tags:y.value,series:S.value}})};ie(()=>{var k,n,c,q;const t=((k=o.query)==null?void 0:k.category)||l.filter.all;_.value=t;let s=[];typeof((n=o.query)==null?void 0:n.tags)=="string"?s=[o.query.tags]:Array.isArray((c=o.query)==null?void 0:c.tags)&&(s=o.query.tags),y.value=s;const h=((q=o.query)==null?void 0:q.series)||l.filter.all;S.value=h,pe(o.query)});const{pending:se,data:re}=([v,T]=G(()=>Q(`${l.article.folder} +'s'`,()=>ce(l.article.folder).only(["title","description","_type","_path","contentType","_type","series","seriesOrder","tags"]).sort({created:1}).find())),v=await v,T(),v),R=b([]);K(()=>o.fullPath,()=>{var s,h,k;if(o.path!=="/list"||re.value.length===0)return;let t=re.value;if((s=o.query)!=null&&s.category&&o.query.category!==l.filter.all&&(t=t.filter(n=>{const c=n._path.split("/");return c.length>=3?c[2]===o.query.category:!1})),(h=o.query)!=null&&h.tags){let n=[];typeof o.query.tags=="string"?n=[o.query.tags]:Array.isArray(o.query.tags)&&(n=o.query.tags),n.length>0&&(t=t.filter(c=>n.some(q=>c.tags?c.tags.includes(q):!1)))}(k=o.query)!=null&&k.series&&o.query.series!==l.filter.all&&(t=t.filter(n=>n.series===o.query.series)),R.value=t},{immediate:!0});const g=b(!1),le=Pe(),de=t=>{const s=le.value[t];return s?s.iconName:le.value.default.iconName},P=t=>{const s=b(t);W.value=s,qe({title:s.value,description:`${l.description.list} ${o.fullPath.slice(6)}`,ogDescription:`${l.description.list} ${o.fullPath.slice(6)}`,ogUrl:`${ue.homepage}${o.fullPath}`}),xe({link:[{rel:"canonical",href:`${ue.homepage}${o.fullPath}`}]})},W=Me(),ae=Ae("searchString"),pe=t=>{{const s=window.location.search;s.substring(1)&&(ae.value=s.substring(1))}P(`${l.title.list} ${ae.value}`)};(()=>{o.fullPath===o.path?P(l.title.list_all):P(`${l.title.list} ${o.fullPath.slice(6)}`)})(),K(()=>o.fullPath,()=>{o.path===o.fullPath?P(l.title.list_all):P(`${l.title.list} ${o.fullPath.slice(6)}`)}),ie(()=>{window&&window.innerWidth>640&&(x.value=!0)});const ne=Ne();return K(()=>ne.value.width,()=>{ne.value.width<640?x.value=!1:x.value=!0}),(t,s)=>{const h=ge,k=he,n=fe,c=ye,q=be;return u(),d("div",je,[i(k,null,{default:M(()=>[i(h,null,{default:M(()=>[we(f(e(W)),1)]),_:1})]),_:1}),a("h1",Fe,f(e(W)),1),i(q,{name:"base"},{default:M(()=>[a("div",He,[a("div",De,[a("button",{id:"showMoreFilter",class:p(["shrink-0 p-2.5 hidden sm:flex justify-center items-center transition-colors duration-300 rounded",e(x)?"bg-purple-500 hover:bg-purple-400 text-white":"bg-purple-100 text-purple-400 hover:text-purple-500"]),onClick:s[0]||(s[0]=r=>x.value=!e(x))},[i(n,{name:"mdi:filter-plus-outline",class:"w-6 h-6"})],2),a("div",ze,[a("div",Ue,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:s[1]||(s[1]=r=>F.value=!e(F))},[i(n,{name:"ic:round-keyboard-arrow-right",class:p(["w-5 h-5 transition-transform duration-300",e(F)?"rotate-90":"rotate-0"])},null,8,["class"])]),a("ul",{class:p(["filter-list-container",e(F)?"max-h-96":"max-h-8"])},[a("li",Ve,[a("button",{class:p(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(_)===e(l).filter.all?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),onClick:s[2]||(s[2]=r=>H(e(l).filter.all))},[i(n,{name:"material-symbols:category-rounded",class:"w-5 h-5"}),a("p",null,f(e(l).filter.all),1)],2)]),(u(),d(N,null,L(X,r=>a("li",{key:r._path,class:"shrink-0"},[a("button",{class:p(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(_)===j(r._path)?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),onClick:m=>H(j(r._path))},[i(n,{name:"material-symbols:category-rounded",class:"shrink-0 w-5 h-5"}),a("p",null,f(j(r._path)),1)],10,Be)])),64))],2)]),i(ke,{"enter-from-class":"-translate-y-8 opacity-0","enter-active-class":"transition-all duration-300 ease-out","enter-to-class":"translate-y-0 opacity-100","leave-from-class":"translate-y-0 opacity-100","leave-active-class":"transition-all duration-100 ease-in","leave-to-class":"-translate-y-8 opacity-0"},{default:M(()=>[C(a("div",Ee,[a("div",Oe,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:s[3]||(s[3]=r=>D.value=!e(D))},[i(n,{name:"ic:round-keyboard-arrow-right",class:p(["w-5 h-5 transition-transform duration-300",e(D)?"rotate-90":"rotate-0"])},null,8,["class"])]),e(V)?(u(),d("ul",{key:0,class:p(["filter-list-container",e(D)?"max-h-96":"max-h-8"])},[(u(!0),d(N,null,L([e(l).filter.all,...e(V)],r=>{var m;return u(),d("li",{key:r,class:"shrink-0"},[a("button",{class:p(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(y).length===0&&r===e(l).filter.all||e(y).includes(r)?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),disabled:!(r===e(l).filter.all||e(_)===e(l).filter.all||(m=Y[e(_)])!=null&&m.includes(r)),onClick:oe=>ee(r)},[a("p",null,"#"+f(r),1)],10,Re)])}),128))],2)):A("",!0)]),a("div",We,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:s[4]||(s[4]=r=>z.value=!e(z))},[i(n,{name:"ic:round-keyboard-arrow-right",class:p(["w-5 h-5 transition-transform duration-300",e(z)?"rotate-90":"rotate-0"])},null,8,["class"])]),e(B)?(u(),d("ul",{key:0,class:p(["filter-list-container",e(z)?"max-h-96":"max-h-8"])},[(u(!0),d(N,null,L([e(l).filter.all,...e(B)],r=>{var m;return u(),d("li",{key:r,class:"shrink-0"},[a("button",{class:p(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(S)===r?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),disabled:!(r===e(l).filter.all||e(_)===e(l).filter.all||(m=Z[e(_)])!=null&&m.includes(r)),onClick:oe=>te(r)},[i(n,{name:"bi:collection",class:"shrink-0 w-5 h-5"}),a("p",null,f(r),1)],10,Ge)])}),128))],2)):A("",!0)])],512),[[$,e(x)]])]),_:1}),a("div",Ke,[a("button",{class:"px-4 py-1 sm:hidden text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:s[5]||(s[5]=r=>H(e(l).filter.all))},[i(n,{name:"ant-design:clear-outlined",class:"w-4 h-4"})]),a("button",{class:"grow py-1 sm:hidden text-purple-500 bg-purple-100 rounded",onClick:s[6]||(s[6]=r=>x.value=!e(x))},[C(i(n,{name:"ic:round-keyboard-arrow-down",class:"w-4 h-4"},null,512),[[$,!e(x)]]),C(i(n,{name:"ic:round-keyboard-arrow-up",class:"w-4 h-4"},null,512),[[$,e(x)]])]),a("button",{class:p(["px-4 py-1 sm:hidden transition-colors duration-300 rounded",e(g)?"text-white bg-green-600 hover:bg-green-900":"text-green-700 hover:text-green-900 bg-green-50 hover:bg-green-300"]),onClick:s[7]||(s[7]=r=>g.value=!e(g))},[C(i(n,{name:"ic:round-unfold-less",class:"w-4 h-4"},null,512),[[$,e(g)]]),C(i(n,{name:"ic:round-unfold-more",class:"w-4 h-4"},null,512),[[$,!e(g)]])],2)])])]),Qe]),a("div",Je,[a("button",{class:"p-2 flex items-center text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:s[8]||(s[8]=r=>H(e(l).filter.all))},[i(n,{name:"ant-design:clear-outlined",class:"w-5 h-5"}),a("p",Xe,f(e(l).filter.clear),1)]),a("button",{class:p(["p-2 flex items-center transition-colors duration-300 rounded",e(g)?"text-white bg-green-600 hover:bg-green-900":"text-green-700 hover:text-green-900 bg-green-50 hover:bg-green-300"]),onClick:s[9]||(s[9]=r=>g.value=!e(g))},[C(i(n,{name:"ic:round-unfold-less",class:"w-5 h-5"},null,512),[[$,e(g)]]),C(i(n,{name:"ic:round-unfold-more",class:"w-5 h-5"},null,512),[[$,!e(g)]]),a("p",Ye,f(e(g)?e(l).filter.less:e(l).filter.more)+" "+f(e(l).filter.detail),1)],2)]),e(se)?(u(),d("div",Ze,[i(n,{name:"eos-icons:loading",class:"w-10 h-10"}),a("p",et,f(e(l).filter.loading),1)])):A("",!0),!e(se)&&e(R)?(u(),d("div",tt,[a("ul",{class:p(e(g)?"space-y-2":"grid sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3 items-start gap-2")},[(u(!0),d(N,null,L(e(R),r=>(u(),d("li",{key:r._path,class:"space-y-2"},[i(c,{to:r._path,"aria-label":"item._path",class:"block px-4 py-2 text-gray-600 hover:text-blue-500 hover:bg-blue-100 transition-colors duration-300 rounded-lg space-y-2"},{default:M(()=>[a("div",st,[i(n,{name:de(r._type),class:"shrink-0 p-1 w-6 h-6 sm:w-7 sm:h-7"},null,8,["name"]),a("h2",rt,f(r.title),1)]),r.description?C((u(),d("p",{key:0,class:"px-6 text-sm opacity-60 short-description"},f(r.description),513)),[[$,e(g)]]):A("",!0)]),_:2},1032,["to"]),r._type==="markdown"&&(r.tags||r.series)?C((u(),d("div",lt,[(u(!0),d(N,null,L(r.tags,m=>(u(),d("button",{key:m,class:p(["px-2 py-1 transition-colors duration-300 rounded",e(y).length===0&&m===e(l).filter.all||e(y).includes(m)?"text-white bg-blue-500 hover:bg-blue-400":"text-blue-700 hover:bg-blue-200 bg-blue-100"]),onClick:oe=>ee(m)}," #"+f(m),11,at))),128)),r.series?(u(),d("button",{key:0,class:p(["px-2 py-1 flex justify-center items-center space-x-1 transition-colors duration-300 rounded",e(S)===r.series?"text-white bg-green-600 hover:bg-green-700":"text-green-900 hover:bg-green-300 bg-green-200"]),onClick:m=>te(r.series)},[i(n,{name:"bi:collection",class:"shrink-0 w-4 h-4"}),a("p",null,f(r.series),1)],10,nt)):A("",!0)],512)),[[$,e(g)]]):A("",!0)]))),128))],2)])):A("",!0)]),_:1})])}}});const wt=Le(ot,[["__scopeId","data-v-c1aec1e1"]]);export{wt as default};
