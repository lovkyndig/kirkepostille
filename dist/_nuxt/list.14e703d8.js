import{H as de,T as pe}from"./components.7e71f05d.js";import{_ as he}from"./IconCustom.vue.038f8a1e.js";import{_ as ge}from"./nuxt-link.c4d9062b.js";import{f as fe,G as ye,H as J,v as s,r as v,x as me,j as ne,o as d,c as p,b as i,w as N,a,t as c,g as e,u as _e,_ as xe,d as ve,n as h,F as L,q as M,T as be,m as k,s as $,h as A,J as we,p as ke,e as $e}from"./entry.5d653b89.js";import{u as Ce}from"./index.3f49a0ba.js";import{u as Q,q as oe}from"./query.e942ff80.js";import{u as qe}from"./state.7dbd7c25.js";import{f as Se}from"./navigation.bd49909e.js";import{l as Ae,m as Te}from"./states.65fea9ff.js";import{p as ie}from"./package.161ea9d4.js";import{_ as Pe}from"./_plugin-vue_export-helper.c27b6911.js";import"./preview.bedb080b.js";const Ne=I=>(ke("data-v-c03aa5de"),I=I(),$e(),I),Le={id:"list_page"},Me={style:{display:"none"}},Ie={class:"shrink-0 px-4 sm:px-8 py-4 space-y-4 sm:sticky top-0 inset-x-0 z-10 bg-gray-50"},je={class:"flex items-start sm:space-x-2"},He={class:"grow max-w-full space-y-2"},De={class:"p-2 flex items-start text-sm bg-gray-100 sm:space-x-4"},Fe={class:"px-2 py-1 sm:hidden"},Ue={class:"shrink-0"},Ve=["onClick"],Be={class:"space-y-2"},Ee={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},ze={class:"px-2 py-1 sm:hidden"},Oe=["disabled","onClick"],Re={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},Ge={class:"px-2 py-1 sm:hidden"},Je=["disabled","onClick"],Qe={class:"flex items-center space-x-2"},Ke=Ne(()=>a("hr",null,null,-1)),We={class:"shrink-0 mx-4 sm:mx-8 hidden sm:flex justify-between items-center text-sm"},Xe={class:"hidden sm:block"},Ye={class:"hidden sm:block"},Ze={key:0,class:"grow flex flex-col justify-center items-center space-y-2 text-gray-400"},et={class:"text-xl"},tt={key:1,class:"grow container p-4 sm:p-8 mx-auto space-y-4"},st={class:"flex items-start"},rt={class:"grow font-bold text-base sm:text-lg"},lt={key:0,class:"px-10 flex flex-wrap gap-2 text-xs"},at=["onClick"],nt=["onClick"],ot=fe({__name:"list",async setup(I){let _,T;const o=ye(),{data:K}=([_,T]=J(()=>Q("rootFolder",()=>Se())),_=await _,T(),_);let b;const W=[];Array.isArray(K.value)&&(b=K.value.find(r=>r._path===s.article.link),b!=null&&b.children&&b.children.length>0&&b.children.forEach(r=>{"children"in r&&W.push(r)}));const j=(r="")=>{let t="";const g=r.split("/");return g.length===3&&g[1]===s.article.folder&&(t=g[2]),t},x=v(s.filter.all),H=v(!1),D=r=>{x.value===r?x.value=s.filter.all:x.value=r,y.value=[],q.value=s.filter.all,V()},C=v(!0);let B,E;const z=[],O=[],X={},Y={};if(b&&b.children.length>0){for(const r of b.children)if("children"in r){const t=[],g=[],{data:w}=([_,T]=J(()=>Q(`${r._path}-filter`,()=>oe(`${r._path}`).where({_type:"markdown"}).only(["tags","series"]).find())),_=await _,T(),_);w.value.forEach(u=>{u.tags&&(t.push(...u.tags),z.push(...u.tags)),u.series&&(g.push(u.series),O.push(u.series))});const n=j(r._path);n&&(X[n]=[...new Set(t)],Y[n]=[...new Set(g)])}else r._type&&r._type==="markdown"&&(r.tags&&z.push(...r.tags),r.series&&O.push(r.series));B=new Set(z),E=new Set(O)}const y=v([]),F=v(!1),Z=r=>{if(r===s.filter.all){y.value=[],V();return}if(y.value.length>0){const t=y.value.findIndex(g=>g===r);t!==-1?y.value.splice(t,1):y.value.push(r)}else y.value.push(r);V()},q=v(s.filter.all),U=v(!1),ee=r=>{q.value===r?q.value=s.filter.all:q.value=r,V()},V=()=>{we({path:"/list",query:{category:x.value,tags:y.value,series:q.value}})};me(()=>{var w,n,u,S;const r=((w=o.query)==null?void 0:w.category)||s.filter.all;x.value=r;let t=[];typeof((n=o.query)==null?void 0:n.tags)=="string"?t=[o.query.tags]:Array.isArray((u=o.query)==null?void 0:u.tags)&&(t=o.query.tags),y.value=t;const g=((S=o.query)==null?void 0:S.series)||s.filter.all;q.value=g,ue(o.query)});const{pending:te,data:se}=([_,T]=J(()=>Q(`${s.article.folder} +'s'`,()=>oe(s.article.folder).only(["title","description","_type","_path","contentType","_type","series","seriesOrder","tags"]).sort({created:1}).find())),_=await _,T(),_),R=v([]);ne(()=>o.fullPath,()=>{var t,g,w;if(o.path!=="/list"||se.value.length===0)return;let r=se.value;if((t=o.query)!=null&&t.category&&o.query.category!==s.filter.all&&(r=r.filter(n=>{const u=n._path.split("/");return u.length>=3?u[2]===o.query.category:!1})),(g=o.query)!=null&&g.tags){let n=[];typeof o.query.tags=="string"?n=[o.query.tags]:Array.isArray(o.query.tags)&&(n=o.query.tags),n.length>0&&(r=r.filter(u=>n.some(S=>u.tags?u.tags.includes(S):!1)))}(w=o.query)!=null&&w.series&&o.query.series!==s.filter.all&&(r=r.filter(n=>n.series===o.query.series)),R.value=r},{immediate:!0});const f=v(!1),re=Ae(),ce=r=>{const t=re.value[r];return t?t.iconName:re.value.default.iconName},P=r=>{const t=v(r);G.value=t,Ce({title:t.value,description:`${s.description.list} ${o.fullPath.slice(6)}`,ogDescription:`${s.description.list} ${o.fullPath.slice(6)}`,ogUrl:`${ie.homepage}${o.fullPath}`}),_e({link:[{rel:"canonical",href:`${ie.homepage}${o.fullPath}`}]})},G=Te(),le=qe("searchString"),ue=r=>{{const t=window.location.search;t.substring(1)&&(le.value=t.substring(1))}P(`${s.title.list} ${le.value}`)};return(()=>{o.fullPath===o.path?P(s.title.list_all):P(`${s.title.list} ${o.fullPath.slice(6)}`)})(),ne(()=>o.fullPath,()=>{o.path===o.fullPath?P(s.title.list_all):P(`${s.title.list} ${o.fullPath.slice(6)}`)}),(r,t)=>{const g=pe,w=de,n=he,u=ge,S=xe;return d(),p("div",Le,[i(w,null,{default:N(()=>[i(g,null,{default:N(()=>[ve(c(e(G)),1)]),_:1})]),_:1}),a("h1",Me,c(e(G)),1),i(S,{name:"base"},{default:N(()=>[a("div",Ie,[a("div",je,[a("button",{class:h(["shrink-0 p-2.5 hidden sm:flex justify-center items-center transition-colors duration-300 rounded",e(C)?"bg-purple-500 hover:bg-purple-400 text-white":"bg-purple-100 text-purple-400 hover:text-purple-500"]),onClick:t[0]||(t[0]=l=>C.value=!e(C))},[i(n,{name:"mdi:filter-plus-outline",class:"w-6 h-6"})],2),a("div",He,[a("div",De,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:t[1]||(t[1]=l=>H.value=!e(H))},[i(n,{name:"ic:round-keyboard-arrow-right",class:h(["w-5 h-5 transition-transform duration-300",e(H)?"rotate-90":"rotate-0"])},null,8,["class"]),a("p",null,c(e(s).filter.category),1)]),a("p",Fe,c(e(s).filter.category),1),a("ul",{class:h(["filter-list-container",e(H)?"max-h-96":"max-h-8"])},[a("li",Ue,[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(x)===e(s).filter.all?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),onClick:t[2]||(t[2]=l=>D(e(s).filter.all))},[i(n,{name:"material-symbols:category-rounded",class:"w-5 h-5"}),a("p",null,c(e(s).filter.all),1)],2)]),(d(),p(L,null,M(W,l=>a("li",{key:l._path,class:"shrink-0"},[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(x)===j(l._path)?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),onClick:m=>D(j(l._path))},[i(n,{name:"material-symbols:category-rounded",class:"shrink-0 w-5 h-5"}),a("p",null,c(j(l._path)),1)],10,Ve)])),64))],2)]),i(be,{"enter-from-class":"-translate-y-8 opacity-0","enter-active-class":"transition-all duration-300 ease-out","enter-to-class":"translate-y-0 opacity-100","leave-from-class":"translate-y-0 opacity-100","leave-active-class":"transition-all duration-100 ease-in","leave-to-class":"-translate-y-8 opacity-0"},{default:N(()=>[k(a("div",Be,[a("div",Ee,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:t[3]||(t[3]=l=>F.value=!e(F))},[i(n,{name:"ic:round-keyboard-arrow-right",class:h(["w-5 h-5 transition-transform duration-300",e(F)?"rotate-90":"rotate-0"])},null,8,["class"]),a("p",null,c(e(s).filter.tags),1)]),a("p",ze,c(e(s).filter.tags),1),e(B)?(d(),p("ul",{key:0,class:h(["filter-list-container",e(F)?"max-h-96":"max-h-8"])},[(d(!0),p(L,null,M([e(s).filter.all,...e(B)],l=>{var m;return d(),p("li",{key:l,class:"shrink-0"},[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(y).length===0&&l===e(s).filter.all||e(y).includes(l)?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),disabled:!(l===e(s).filter.all||e(x)===e(s).filter.all||(m=X[e(x)])!=null&&m.includes(l)),onClick:ae=>Z(l)},[a("p",null,"#"+c(l),1)],10,Oe)])}),128))],2)):A("",!0)]),a("div",Re,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:t[4]||(t[4]=l=>U.value=!e(U))},[i(n,{name:"ic:round-keyboard-arrow-right",class:h(["w-5 h-5 transition-transform duration-300",e(U)?"rotate-90":"rotate-0"])},null,8,["class"]),a("p",null,c(e(s).filter.series),1)]),a("p",Ge,c(e(s).filter.series),1),e(E)?(d(),p("ul",{key:0,class:h(["filter-list-container",e(U)?"max-h-96":"max-h-8"])},[(d(!0),p(L,null,M([e(s).filter.all,...e(E)],l=>{var m;return d(),p("li",{key:l,class:"shrink-0"},[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(q)===l?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),disabled:!(l===e(s).filter.all||e(x)===e(s).filter.all||(m=Y[e(x)])!=null&&m.includes(l)),onClick:ae=>ee(l)},[i(n,{name:"bi:collection",class:"shrink-0 w-5 h-5"}),a("p",null,c(l),1)],10,Je)])}),128))],2)):A("",!0)])],512),[[$,e(C)]])]),_:1}),a("div",Qe,[a("button",{class:"px-4 py-1 sm:hidden text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:t[5]||(t[5]=l=>D(e(s).filter.all))},[i(n,{name:"ant-design:clear-outlined",class:"w-4 h-4"})]),a("button",{class:"grow py-1 sm:hidden text-purple-500 bg-purple-100 rounded",onClick:t[6]||(t[6]=l=>C.value=!e(C))},[k(i(n,{name:"ic:round-keyboard-arrow-down",class:"w-4 h-4"},null,512),[[$,!e(C)]]),k(i(n,{name:"ic:round-keyboard-arrow-up",class:"w-4 h-4"},null,512),[[$,e(C)]])]),a("button",{class:h(["px-4 py-1 sm:hidden transition-colors duration-300 rounded",e(f)?"text-white bg-green-600 hover:bg-green-900":"text-green-700 hover:text-green-900 bg-green-50 hover:bg-green-300"]),onClick:t[7]||(t[7]=l=>f.value=!e(f))},[k(i(n,{name:"ic:round-unfold-less",class:"w-4 h-4"},null,512),[[$,e(f)]]),k(i(n,{name:"ic:round-unfold-more",class:"w-4 h-4"},null,512),[[$,!e(f)]])],2)])])]),Ke]),a("div",We,[a("button",{class:"p-2 flex items-center text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:t[8]||(t[8]=l=>D(e(s).filter.all))},[i(n,{name:"ant-design:clear-outlined",class:"w-5 h-5"}),a("p",Xe,c(e(s).filter.clear),1)]),a("button",{class:h(["p-2 flex items-center transition-colors duration-300 rounded",e(f)?"text-white bg-green-600 hover:bg-green-900":"text-green-700 hover:text-green-900 bg-green-50 hover:bg-green-300"]),onClick:t[9]||(t[9]=l=>f.value=!e(f))},[k(i(n,{name:"ic:round-unfold-less",class:"w-5 h-5"},null,512),[[$,e(f)]]),k(i(n,{name:"ic:round-unfold-more",class:"w-5 h-5"},null,512),[[$,!e(f)]]),a("p",Ye,c(e(f)?e(s).filter.less:e(s).filter.more)+" "+c(e(s).filter.detail),1)],2)]),e(te)?(d(),p("div",Ze,[i(n,{name:"eos-icons:loading",class:"w-10 h-10"}),a("p",et,c(e(s).filter.loading),1)])):A("",!0),!e(te)&&e(R)?(d(),p("div",tt,[a("ul",{class:h(e(f)?"space-y-2":"grid sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3 items-start gap-2")},[(d(!0),p(L,null,M(e(R),l=>(d(),p("li",{key:l._path,class:"space-y-2"},[i(u,{to:l._path,"aria-label":"item._path",class:"block px-4 py-2 text-gray-600 hover:text-blue-500 hover:bg-blue-100 transition-colors duration-300 rounded-lg space-y-2"},{default:N(()=>[a("div",st,[i(n,{name:ce(l._type),class:"shrink-0 p-1 w-6 h-6 sm:w-7 sm:h-7"},null,8,["name"]),a("h2",rt,c(l.title),1)]),l.description?k((d(),p("p",{key:0,class:"px-6 text-sm opacity-60 short-description"},c(l.description),513)),[[$,e(f)]]):A("",!0)]),_:2},1032,["to"]),l._type==="markdown"&&(l.tags||l.series)?k((d(),p("div",lt,[(d(!0),p(L,null,M(l.tags,m=>(d(),p("button",{key:m,class:h(["px-2 py-1 transition-colors duration-300 rounded",e(y).length===0&&m===e(s).filter.all||e(y).includes(m)?"text-white bg-blue-500 hover:bg-blue-400":"text-blue-700 hover:bg-blue-200 bg-blue-100"]),onClick:ae=>Z(m)}," #"+c(m),11,at))),128)),l.series?(d(),p("button",{key:0,class:h(["px-2 py-1 flex justify-center items-center space-x-1 transition-colors duration-300 rounded",e(q)===l.series?"text-white bg-green-600 hover:bg-green-700":"text-green-900 hover:bg-green-300 bg-green-200"]),onClick:m=>ee(l.series)},[i(n,{name:"bi:collection",class:"shrink-0 w-4 h-4"}),a("p",null,c(l.series),1)],10,nt)):A("",!0)],512)),[[$,e(f)]]):A("",!0)]))),128))],2)])):A("",!0)]),_:1})])}}});const bt=Pe(ot,[["__scopeId","data-v-c03aa5de"]]);export{bt as default};
