import{H as de,T as pe}from"./components.ebdd3503.js";import{_ as he}from"./IconCustom.vue.c9badffd.js";import{_ as ge}from"./nuxt-link.3b4c2494.js";import{f as fe,g as ye,G as me,H as K,r as v,x as _e,k as ne,o as d,c as p,b as i,w as N,a,t as c,h as e,u as xe,_ as ve,d as be,n as h,F as L,s as M,T as we,q as k,v as C,i as A,K as ke,p as Ce,e as $e}from"./entry.e1201b13.js";import{u as qe}from"./index.fe0b2f26.js";import{u as Q,q as oe}from"./query.40749ae7.js";import{u as Se}from"./state.b43434ad.js";import{f as Ae}from"./navigation.4e1d9028.js";import{l as Te,m as Pe}from"./states.ec00dd6f.js";import{p as ie}from"./package.7a1f2725.js";import{_ as Ne}from"./_plugin-vue_export-helper.c27b6911.js";import"./iconify.b5131d16.js";import"./preview.68f60945.js";const Le=I=>(Ce("data-v-7d55a4ad"),I=I(),$e(),I),Me={id:"list_page"},Ie={style:{display:"none"}},He={class:"shrink-0 px-4 sm:px-8 py-4 space-y-4 sm:sticky top-0 inset-x-0 z-10 bg-gray-50"},je={class:"flex items-start sm:space-x-2"},De={class:"grow max-w-full space-y-2"},Fe={class:"p-2 flex items-start text-sm bg-gray-100 sm:space-x-4"},Ue={class:"px-2 py-1 sm:hidden"},Ve={class:"shrink-0"},Be=["onClick"],Ee={class:"space-y-2"},ze={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},Oe={class:"px-2 py-1 sm:hidden"},Re=["disabled","onClick"],Ge={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},Ke={class:"px-2 py-1 sm:hidden"},Qe=["disabled","onClick"],Je={class:"flex items-center space-x-2"},We=Le(()=>a("hr",null,null,-1)),Xe={class:"shrink-0 mx-4 sm:mx-8 hidden sm:flex justify-between items-center text-sm"},Ye={class:"hidden sm:block"},Ze={class:"hidden sm:block"},et={key:0,class:"grow flex flex-col justify-center items-center space-y-2 text-gray-400"},tt={class:"text-xl"},st={key:1,class:"grow container p-4 sm:p-8 mx-auto space-y-4"},rt={class:"flex items-start"},lt={class:"grow font-bold text-base sm:text-lg"},at={key:0,class:"px-10 flex flex-wrap gap-2 text-xs"},nt=["onClick"],ot=["onClick"],it=fe({__name:"list",async setup(I){let _,T;const t=ye(),o=me(),{data:J}=([_,T]=K(()=>Q("rootFolder",()=>Ae())),_=await _,T(),_);let b;const W=[];Array.isArray(J.value)&&(b=J.value.find(r=>r._path===t.article.link),b!=null&&b.children&&b.children.length>0&&b.children.forEach(r=>{"children"in r&&W.push(r)}));const H=(r="")=>{let s="";const g=r.split("/");return g.length===3&&g[1]===t.article.folder&&(s=g[2]),s},x=v(t.filter.all),j=v(!1),D=r=>{x.value===r?x.value=t.filter.all:x.value=r,y.value=[],q.value=t.filter.all,V()},$=v(!0);let B,E;const z=[],O=[],X={},Y={};if(b&&b.children.length>0){for(const r of b.children)if("children"in r){const s=[],g=[],{data:w}=([_,T]=K(()=>Q(`${r._path}-filter`,()=>oe(`${r._path}`).where({_type:"markdown"}).only(["tags","series"]).find())),_=await _,T(),_);w.value.forEach(u=>{u.tags&&(s.push(...u.tags),z.push(...u.tags)),u.series&&(g.push(u.series),O.push(u.series))});const n=H(r._path);n&&(X[n]=[...new Set(s)],Y[n]=[...new Set(g)])}else r._type&&r._type==="markdown"&&(r.tags&&z.push(...r.tags),r.series&&O.push(r.series));B=new Set(z),E=new Set(O)}const y=v([]),F=v(!1),Z=r=>{if(r===t.filter.all){y.value=[],V();return}if(y.value.length>0){const s=y.value.findIndex(g=>g===r);s!==-1?y.value.splice(s,1):y.value.push(r)}else y.value.push(r);V()},q=v(t.filter.all),U=v(!1),ee=r=>{q.value===r?q.value=t.filter.all:q.value=r,V()},V=()=>{ke({path:"/list",query:{category:x.value,tags:y.value,series:q.value}})};_e(()=>{var w,n,u,S;const r=((w=o.query)==null?void 0:w.category)||t.filter.all;x.value=r;let s=[];typeof((n=o.query)==null?void 0:n.tags)=="string"?s=[o.query.tags]:Array.isArray((u=o.query)==null?void 0:u.tags)&&(s=o.query.tags),y.value=s;const g=((S=o.query)==null?void 0:S.series)||t.filter.all;q.value=g,ue(o.query)});const{pending:te,data:se}=([_,T]=K(()=>Q(`${t.article.folder} +'s'`,()=>oe(t.article.folder).only(["title","description","_type","_path","contentType","_type","series","seriesOrder","tags"]).sort({created:1}).find())),_=await _,T(),_),R=v([]);ne(()=>o.fullPath,()=>{var s,g,w;if(o.path!=="/list"||se.value.length===0)return;let r=se.value;if((s=o.query)!=null&&s.category&&o.query.category!==t.filter.all&&(r=r.filter(n=>{const u=n._path.split("/");return u.length>=3?u[2]===o.query.category:!1})),(g=o.query)!=null&&g.tags){let n=[];typeof o.query.tags=="string"?n=[o.query.tags]:Array.isArray(o.query.tags)&&(n=o.query.tags),n.length>0&&(r=r.filter(u=>n.some(S=>u.tags?u.tags.includes(S):!1)))}(w=o.query)!=null&&w.series&&o.query.series!==t.filter.all&&(r=r.filter(n=>n.series===o.query.series)),R.value=r},{immediate:!0});const f=v(!1),re=Te(),ce=r=>{const s=re.value[r];return s?s.iconName:re.value.default.iconName},P=r=>{const s=v(r);G.value=s,qe({title:s.value,description:`${t.description.list} ${o.fullPath.slice(6)}`,ogDescription:`${t.description.list} ${o.fullPath.slice(6)}`,ogUrl:`${ie.homepage}${o.fullPath}`}),xe({link:[{rel:"canonical",href:`${ie.homepage}${o.fullPath}`}]})},G=Pe(),le=Se("searchString"),ue=r=>{{const s=window.location.search;s.substring(1)&&(le.value=s.substring(1))}P(`${t.title.list} ${le.value}`)};return(()=>{o.fullPath===o.path?P(t.title.list_all):P(`${t.title.list} ${o.fullPath.slice(6)}`)})(),ne(()=>o.fullPath,()=>{o.path===o.fullPath?P(t.title.list_all):P(`${t.title.list} ${o.fullPath.slice(6)}`)}),(r,s)=>{const g=pe,w=de,n=he,u=ge,S=ve;return d(),p("div",Me,[i(w,null,{default:N(()=>[i(g,null,{default:N(()=>[be(c(e(G)),1)]),_:1})]),_:1}),a("h1",Ie,c(e(G)),1),i(S,{name:"base"},{default:N(()=>[a("div",He,[a("div",je,[a("button",{class:h(["shrink-0 p-2.5 hidden sm:flex justify-center items-center transition-colors duration-300 rounded",e($)?"bg-purple-500 hover:bg-purple-400 text-white":"bg-purple-100 text-purple-400 hover:text-purple-500"]),onClick:s[0]||(s[0]=l=>$.value=!e($))},[i(n,{name:"mdi:filter-plus-outline",class:"w-6 h-6"})],2),a("div",De,[a("div",Fe,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:s[1]||(s[1]=l=>j.value=!e(j))},[i(n,{name:"ic:round-keyboard-arrow-right",class:h(["w-5 h-5 transition-transform duration-300",e(j)?"rotate-90":"rotate-0"])},null,8,["class"]),a("p",null,c(e(t).filter.category),1)]),a("p",Ue,c(e(t).filter.category),1),a("ul",{class:h(["filter-list-container",e(j)?"max-h-96":"max-h-8"])},[a("li",Ve,[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(x)===e(t).filter.all?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),onClick:s[2]||(s[2]=l=>D(e(t).filter.all))},[i(n,{name:"material-symbols:category-rounded",class:"w-5 h-5"}),a("p",null,c(e(t).filter.all),1)],2)]),(d(),p(L,null,M(W,l=>a("li",{key:l._path,class:"shrink-0"},[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(x)===H(l._path)?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),onClick:m=>D(H(l._path))},[i(n,{name:"material-symbols:category-rounded",class:"shrink-0 w-5 h-5"}),a("p",null,c(H(l._path)),1)],10,Be)])),64))],2)]),i(we,{"enter-from-class":"-translate-y-8 opacity-0","enter-active-class":"transition-all duration-300 ease-out","enter-to-class":"translate-y-0 opacity-100","leave-from-class":"translate-y-0 opacity-100","leave-active-class":"transition-all duration-100 ease-in","leave-to-class":"-translate-y-8 opacity-0"},{default:N(()=>[k(a("div",Ee,[a("div",ze,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:s[3]||(s[3]=l=>F.value=!e(F))},[i(n,{name:"ic:round-keyboard-arrow-right",class:h(["w-5 h-5 transition-transform duration-300",e(F)?"rotate-90":"rotate-0"])},null,8,["class"]),a("p",null,c(e(t).filter.tags),1)]),a("p",Oe,c(e(t).filter.tags),1),e(B)?(d(),p("ul",{key:0,class:h(["filter-list-container",e(F)?"max-h-96":"max-h-8"])},[(d(!0),p(L,null,M([e(t).filter.all,...e(B)],l=>{var m;return d(),p("li",{key:l,class:"shrink-0"},[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(y).length===0&&l===e(t).filter.all||e(y).includes(l)?"text-white bg-purple-600 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),disabled:!(l===e(t).filter.all||e(x)===e(t).filter.all||(m=X[e(x)])!=null&&m.includes(l)),onClick:ae=>Z(l)},[a("p",null,"#"+c(l),1)],10,Re)])}),128))],2)):A("",!0)]),a("div",Ge,[a("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:s[4]||(s[4]=l=>U.value=!e(U))},[i(n,{name:"ic:round-keyboard-arrow-right",class:h(["w-5 h-5 transition-transform duration-300",e(U)?"rotate-90":"rotate-0"])},null,8,["class"]),a("p",null,c(e(t).filter.series),1)]),a("p",Ke,c(e(t).filter.series),1),e(E)?(d(),p("ul",{key:0,class:h(["filter-list-container",e(U)?"max-h-96":"max-h-8"])},[(d(!0),p(L,null,M([e(t).filter.all,...e(E)],l=>{var m;return d(),p("li",{key:l,class:"shrink-0"},[a("button",{class:h(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(q)===l?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-600 hover:bg-purple-300 bg-purple-100"]),disabled:!(l===e(t).filter.all||e(x)===e(t).filter.all||(m=Y[e(x)])!=null&&m.includes(l)),onClick:ae=>ee(l)},[i(n,{name:"bi:collection",class:"shrink-0 w-5 h-5"}),a("p",null,c(l),1)],10,Qe)])}),128))],2)):A("",!0)])],512),[[C,e($)]])]),_:1}),a("div",Je,[a("button",{class:"px-4 py-1 sm:hidden text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:s[5]||(s[5]=l=>D(e(t).filter.all))},[i(n,{name:"ant-design:clear-outlined",class:"w-4 h-4"})]),a("button",{class:"grow py-1 sm:hidden text-purple-500 bg-purple-100 rounded",onClick:s[6]||(s[6]=l=>$.value=!e($))},[k(i(n,{name:"ic:round-keyboard-arrow-down",class:"w-4 h-4"},null,512),[[C,!e($)]]),k(i(n,{name:"ic:round-keyboard-arrow-up",class:"w-4 h-4"},null,512),[[C,e($)]])]),a("button",{class:h(["px-4 py-1 sm:hidden transition-colors duration-300 rounded",e(f)?"text-white bg-green-600 hover:bg-green-900":"text-green-700 hover:text-green-900 bg-green-50 hover:bg-green-300"]),onClick:s[7]||(s[7]=l=>f.value=!e(f))},[k(i(n,{name:"ic:round-unfold-less",class:"w-4 h-4"},null,512),[[C,e(f)]]),k(i(n,{name:"ic:round-unfold-more",class:"w-4 h-4"},null,512),[[C,!e(f)]])],2)])])]),We]),a("div",Xe,[a("button",{class:"p-2 flex items-center text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:s[8]||(s[8]=l=>D(e(t).filter.all))},[i(n,{name:"ant-design:clear-outlined",class:"w-5 h-5"}),a("p",Ye,c(e(t).filter.clear),1)]),a("button",{class:h(["p-2 flex items-center transition-colors duration-300 rounded",e(f)?"text-white bg-green-600 hover:bg-green-900":"text-green-700 hover:text-green-900 bg-green-50 hover:bg-green-300"]),onClick:s[9]||(s[9]=l=>f.value=!e(f))},[k(i(n,{name:"ic:round-unfold-less",class:"w-5 h-5"},null,512),[[C,e(f)]]),k(i(n,{name:"ic:round-unfold-more",class:"w-5 h-5"},null,512),[[C,!e(f)]]),a("p",Ze,c(e(f)?e(t).filter.less:e(t).filter.more)+" "+c(e(t).filter.detail),1)],2)]),e(te)?(d(),p("div",et,[i(n,{name:"eos-icons:loading",class:"w-10 h-10"}),a("p",tt,c(e(t).filter.loading),1)])):A("",!0),!e(te)&&e(R)?(d(),p("div",st,[a("ul",{class:h(e(f)?"space-y-2":"grid sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3 items-start gap-2")},[(d(!0),p(L,null,M(e(R),l=>(d(),p("li",{key:l._path,class:"space-y-2"},[i(u,{to:l._path,"aria-label":"item._path",class:"block px-4 py-2 text-gray-600 hover:text-blue-500 hover:bg-blue-100 transition-colors duration-300 rounded-lg space-y-2"},{default:N(()=>[a("div",rt,[i(n,{name:ce(l._type),class:"shrink-0 p-1 w-6 h-6 sm:w-7 sm:h-7"},null,8,["name"]),a("h2",lt,c(l.title),1)]),l.description?k((d(),p("p",{key:0,class:"px-6 text-sm opacity-60 short-description"},c(l.description),513)),[[C,e(f)]]):A("",!0)]),_:2},1032,["to"]),l._type==="markdown"&&(l.tags||l.series)?k((d(),p("div",at,[(d(!0),p(L,null,M(l.tags,m=>(d(),p("button",{key:m,class:h(["px-2 py-1 transition-colors duration-300 rounded",e(y).length===0&&m===e(t).filter.all||e(y).includes(m)?"text-white bg-blue-500 hover:bg-blue-400":"text-blue-700 hover:bg-blue-200 bg-blue-100"]),onClick:ae=>Z(m)}," #"+c(m),11,nt))),128)),l.series?(d(),p("button",{key:0,class:h(["px-2 py-1 flex justify-center items-center space-x-1 transition-colors duration-300 rounded",e(q)===l.series?"text-white bg-green-600 hover:bg-green-700":"text-green-900 hover:bg-green-300 bg-green-200"]),onClick:m=>ee(l.series)},[i(n,{name:"bi:collection",class:"shrink-0 w-4 h-4"}),a("p",null,c(l.series),1)],10,ot)):A("",!0)],512)),[[C,e(f)]]):A("",!0)]))),128))],2)])):A("",!0)]),_:1})])}}});const kt=Ne(it,[["__scopeId","data-v-7d55a4ad"]]);export{kt as default};
