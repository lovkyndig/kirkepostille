import{f as p,E as v,ad as h,Y as _,P as x,W as b,r as g,V as y}from"./entry.88b089c0.js";const N=p({name:"NuxtLoadingIndicator",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},height:{type:Number,default:3},color:{type:[String,Boolean],default:"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)"}},setup(e,{slots:n}){const t=E({duration:e.duration,throttle:e.throttle}),l=b(),i=v();h.unshift(t.start),i.onError(()=>{t.finish()}),i.beforeResolve((o,r)=>{(o===r||o.matched.every((a,d)=>{var u,c,m;return a.components&&((u=a.components)==null?void 0:u.default)===((m=(c=r.matched[d])==null?void 0:c.components)==null?void 0:m.default)}))&&t.finish()}),i.afterEach((o,r,a)=>{a&&t.finish()});const s=l.hook("page:finish",t.finish),f=l.hook("vue:error",t.finish);return _(()=>{const o=h.indexOf(t.start);o>=0&&h.splice(o,1),s(),f(),t.clear()}),()=>x("div",{class:"nuxt-loading-indicator",style:{position:"fixed",top:0,right:0,left:0,pointerEvents:"none",width:"auto",height:`${e.height}px`,opacity:t.isLoading.value?1:0,background:e.color||void 0,backgroundSize:`${100/t.progress.value*100}% auto`,transform:`scaleX(${t.progress.value}%)`,transformOrigin:"left",transition:"transform 0.1s, height 0.4s, opacity 0.4s",zIndex:999999}},n)}});function E(e){const n=g(0),t=g(!1),l=y(()=>1e4/e.duration);let i=null,s=null;function f(){r(),n.value=0,e.throttle?s=setTimeout(()=>{t.value=!0,u()},e.throttle):(t.value=!0,u())}function o(){n.value=100,d()}function r(){clearInterval(i),clearTimeout(s),i=null,s=null}function a(c){n.value=Math.min(100,n.value+c)}function d(){r(),setTimeout(()=>{t.value=!1,setTimeout(()=>{n.value=0},400)},500)}function u(){i=setInterval(()=>{a(l.value)},100)}return{progress:n,isLoading:t,start:f,finish:o,clear:r}}export{N as _};
